<a href="javascript:
$ = window.frames[0].$;
$('.scriptcode').each(function () {
    let div = $(this);
    if (div.find('button').length === 0)
        div.prepend(`<button id='copy_code' onclick='copyCode(this)'>Copy</button>`);
});

$('head').append(`
<script>
function copyCode(item) {
    let code = $(item).parent();
    let title = code.find('.title').children();
    let index = 0;
    for (let i = 0; i < title.length; i++){
        if (!title[i].className) {
            index = i;
            break;
        }
    }
    let text = code.find('pre')[index].outerText;
    navigator.clipboard.writeText(text)
        .then(() => {
            console.log('Успешно скопировано');
        })
        .catch(err => {
            console.log('Что-то пошло не так: ', err);
        })
}
</script>`
);">Копировать</a>
